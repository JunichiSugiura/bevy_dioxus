<!DOCTYPE html>
<html lang="en">
    {% include "head.html" %}

    <body class="bg-background text-text">
        <div>
            {% include "header/index.html" %}
            {% include "header/menu.html" %}

            {% block breadcrumb %}
            {% endblock breadcrumb %}

            {% block content %}
                <ul class="flex justify-center">
                    <a href="{{ get_url(path = "@/docs/_index.md") }}" alt="Docs Page" class="underline text-accent">
                        <li>Docs</li>
                    </a>
                    <p class="px-4">/</p>
                    <a href="{{ get_url(path = "@/todo.md") }}" alt="Todo Page" class="underline text-accent">
                        <li>Todo</li>
                    </a>
                    <p class="px-4">/</p>
                    <a href="{{ get_url(path = "@/debug/_index.md") }}" alt="Debug Page (dev only)" class="underline text-accent">
                        <li>Debug</li>
                    </a>
                </li>
            {% endblock content %}
        </div>

        <script>
            setThemeClass();

            const theme = localStorage.getItem("theme");
            setSelectedTheme(theme);
            updateThemeOptions(theme);

            function openMenu() {
                document.getElementById("menu").classList.remove("hidden");
            }

            function closeMenu() {
                document.getElementById("menu").classList.add("hidden");
            }

            function openThemeSelector() {
                document.getElementById("theme-options").classList.remove("hidden");
            }

            function closeThemeSelector() {
                document.getElementById("theme-options").classList.add("hidden");
            }

            function onSelectTheme(theme) {
                updateTheme(theme);
                closeThemeSelector();
            }

            function updateTheme(theme) {
                switch (theme) {
                    case "light":
                    case "dark":
                        localStorage.setItem("theme", theme);
                        break;
                    case "system":
                        localStorage.removeItem("theme");
                        break;
                }

                setThemeClass();
                setSelectedTheme(theme);
                updateThemeOptions(theme);
            }

            function setThemeClass() {
                if (
                    localStorage.theme === "dark" || (
                        !("theme" in localStorage) &&
                        window.matchMedia("(prefers-color-scheme: dark)").matches)
                ) {
                    document.documentElement.classList.add("dark");
                } else {
                    document.documentElement.classList.remove("dark");
                }
            }

            function setSelectedTheme(theme) {
                switch(theme) {
                    case "light":
                        document.getElementById("theme-selected-light").classList.replace("hidden", "flex");
                        document.getElementById("theme-selected-dark").classList.replace("flex", "hidden");
                        document.getElementById("theme-selected-system").classList.replace("flex", "hidden");
                        break;
                    case "dark":
                        document.getElementById("theme-selected-light").classList.replace("flex", "hidden");
                        document.getElementById("theme-selected-dark").classList.replace("hidden", "flex");
                        document.getElementById("theme-selected-system").classList.replace("flex", "hidden");
                        break;
                    default:
                        document.getElementById("theme-selected-light").classList.replace("flex", "hidden");
                        document.getElementById("theme-selected-dark").classList.replace("flex", "hidden");
                        document.getElementById("theme-selected-system").classList.replace("hidden", "flex");
                        break;
                }
            }

            function updateThemeOptions(theme) {
                switch(theme) {
                    case "light":
                        document.getElementById("theme-options-light-icon").classList.replace("text-neutral-600", "text-accent");
                        document.getElementById("theme-options-light-text").classList.replace("text-neutral-300", "text-accent");
                        document.getElementById("theme-options-dark-icon").classList.replace("text-accent", "text-neutral-600");
                        document.getElementById("theme-options-dark-text").classList.replace("text-accent", "text-neutral-300");
                        document.getElementById("theme-options-system-icon").classList.replace("text-accent", "text-neutral-600");
                        document.getElementById("theme-options-system-text").classList.replace("text-accent", "text-neutral-300");
                        break;
                    case "dark":
                        document.getElementById("theme-options-light-icon").classList.replace("text-accent", "text-neutral-600");
                        document.getElementById("theme-options-light-text").classList.replace("text-accent", "text-neutral-300");
                        document.getElementById("theme-options-dark-icon").classList.replace("text-neutral-600", "text-accent");
                        document.getElementById("theme-options-dark-text").classList.replace("text-neutral-300", "text-accent");
                        document.getElementById("theme-options-system-icon").classList.replace("text-accent", "text-neutral-600");
                        document.getElementById("theme-options-system-text").classList.replace("text-accent", "text-neutral-300");
                        break;
                    default:
                        document.getElementById("theme-options-light-icon").classList.replace("text-accent", "text-neutral-600");
                        document.getElementById("theme-options-light-text").classList.replace("text-accent", "text-neutral-300");
                        document.getElementById("theme-options-dark-icon").classList.replace("text-accent", "text-neutral-600");
                        document.getElementById("theme-options-dark-text").classList.replace("text-accent", "text-neutral-300");
                        document.getElementById("theme-options-system-icon").classList.replace("text-neutral-600", "text-accent");
                        document.getElementById("theme-options-system-text").classList.replace("text-neutral-300", "text-accent");
                        break;
                }
            }
        </script>
    </body>
</html>
